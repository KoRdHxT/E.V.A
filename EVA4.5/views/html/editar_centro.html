<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Centro Deportivo | E.V.A</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/EVA4.5/views/css/Style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar shadow-sm">
        <div class="container-fluid justify-content-between">
            <a class="navbar-brand d-flex align-items-center" href="PaginaWeb.html">
                <i class="bi bi-house-door-fill me-2"></i> INICIO
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="sesionadmin.html">ADMIN</a>
                    <a class="nav-link" href="centros.html">CENTROS DEPORTIVOS</a>
                    <a class="nav-link" href="graficos.html">VALORACIONES</a>
                </div>
            </div>
        </div>
    </nav>

    <main class="container py-5">
        <h2 class="mb-4 text-center" style="color:#21a12c;">
            <i class="bi bi-pencil-square"></i> Editar Centro Deportivo
        </h2>
        <!-- Formulario de edición mejorado y más ancho, aparece arriba de la tabla -->
        <div class="row justify-content-center mb-5">
            <div class="col-lg-8 col-md-10">
                <div class="card shadow-lg" style="background:rgba(0,0,0,0.92); color:#fff;">
                    <div class="card-body">
                        <form id="editarCentroForm" action="/EVA4.5/controllers/conexion/editar_centro.php" method="POST" style="display:none;">
                            <input type="hidden" id="editIdCentro" name="idCentro">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="editNombreCentro" class="form-label">Nombre de Centro</label>
                                    <input type="text" class="form-control" id="editNombreCentro" name="nombreCentro" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="editCorreoCentro" class="form-label">Correo de Contacto</label>
                                    <input type="email" class="form-control" id="editCorreoCentro" name="correoCentro" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="editNumeroCentro" class="form-label">Número</label>
                                    <input type="tel" class="form-control" id="editNumeroCentro" name="numeroCentro" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="editContrasenaCentro" class="form-label">Contraseña</label>
                                    <input type="password" class="form-control" id="editContrasenaCentro" name="contrasenaCentro">
                                </div>
                                <div class="col-md-12">
                                    <label for="editDescripcionCentro" class="form-label">Descripción</label>
                                    <textarea class="form-control" id="editDescripcionCentro" name="descripcionCentro" rows="2"></textarea>
                                </div>
                                <div class="col-md-6">
                                    <label for="editEstadoCentro" class="form-label">Estado</label>
                                    <select class="form-select" id="editEstadoCentro" name="estadoCentro" required>
                                        <option value="activo">Activo</option>
                                        <option value="inactivo">Inactivo</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="editDireccionCentro" class="form-label">Dirección</label>
                                    <input type="text" class="form-control" id="editDireccionCentro" name="direccionCentro" required>
                                </div>
                            </div>
                            <div class="d-grid gap-2 mt-4">
                                <button type="submit" class="btn btn-primary btn-lg"><i class="bi bi-save me-2"></i>Guardar Cambios</button>
                                <button type="button" class="btn btn-secondary" id="cancelarEdicion">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Tabla de centros deportivos con estilo vistoso -->
        <div class="table-responsive mb-5">
            <table class="table table-hover align-middle shadow-lg" style="border-radius:18px; overflow:hidden; background:rgba(0,0,0,0.85);">
                <thead style="background:linear-gradient(90deg,#21a12c 0%,#0d6efd 100%); color:#fff;">
                    <tr>
                        <th><i class="bi bi-building"></i> Nombre</th>
                        <th><i class="bi bi-envelope"></i> Correo</th>
                        <th><i class="bi bi-telephone"></i> Número</th>
                        <th><i class="bi bi-check-circle"></i> Estado</th>
                        <th><i class="bi bi-geo-alt"></i> Dirección</th>
                        <th><i class="bi bi-gear"></i> Acciones</th>
                    </tr>
                </thead>
                <tbody id="centrosTableBody" style="background:rgba(255,255,255,0.95); color:#222;">
                    <!-- Aquí se cargarán los centros dinámicamente -->
                </tbody>
            </table>
        </div>
      
        <!-- Demo JS funcionalidad básica (simulado con datos locales) -->
        <!--<script>
           
            // Datos de ejemplo (simularían venir de la base de datos)
            let centros = [
                {
                    id: 1,
                    nombre: "Polideportivo Sur",
                    correo: "contacto@polisur.com",
                    numero: "3001234567",
                    contrasena: "12345",
                    descripcion: "Centro deportivo con canchas múltiples.",
                    estado: "activo",
                    direccion: "Calle 123 #45-67"
                },
                {
                    id: 2,
                    nombre: "Club Norte",
                    correo: "info@clubnorte.com",
                    numero: "3109876543",
                    contrasena: "abcde",
                    descripcion: "Club con piscina y gimnasio.",
                    estado: "inactivo",
                    direccion: "Carrera 10 #20-30"
                }
            ];

            function cargarTabla() {
                const tbody = document.getElementById('centrosTableBody');
                tbody.innerHTML = "";
                centros.forEach(centro => {
                    tbody.innerHTML += `
                        <tr style="transition:background 0.2s;">
                            <td><span class="fw-bold">${centro.nombre}</span></td>
                            <td>${centro.correo}</td>
                            <td>${centro.numero}</td>
                            <td>
                                <span class="badge ${centro.estado === 'activo' ? 'bg-success' : 'bg-secondary'}">
                                    ${centro.estado.charAt(0).toUpperCase() + centro.estado.slice(1)}
                                </span>
                            </td>
                            <td>${centro.direccion}</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary" onclick="editarCentro(${centro.id})">
                                    <i class="bi bi-pencil-square"></i> Editar
                                </button>
                            </td>
                        </tr>
                    `;
                });
            }

            function editarCentro(id) {
                const centro = centros.find(c => c.id === id);
                if (!centro) return;
                document.getElementById('editarCentroForm').style.display = 'block';
                document.getElementById('editIdCentro').value = centro.id;
                document.getElementById('editNombreCentro').value = centro.nombre;
                document.getElementById('editCorreoCentro').value = centro.correo;
                document.getElementById('editNumeroCentro').value = centro.numero;
                document.getElementById('editContrasenaCentro').value = centro.contrasena;
                document.getElementById('editDescripcionCentro').value = centro.descripcion;
                document.getElementById('editEstadoCentro').value = centro.estado;
                document.getElementById('editDireccionCentro').value = centro.direccion;
                window.scrollTo({ top: document.getElementById('editarCentroForm').offsetTop - 80, behavior: 'smooth' });
            }

            document.getElementById('editarCentroForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const id = document.getElementById('editIdCentro').value;
                const data = {
                    id: id,
                    nombreCentro: document.getElementById('editNombreCentro').value,
                    correoCentro: document.getElementById('editCorreoCentro').value,
                    numeroCentro: document.getElementById('editNumeroCentro').value,
                    contrasenaCentro: document.getElementById('editContrasenaCentro').value,
                    descripcionCentro: document.getElementById('editDescripcionCentro').value,
                    estadoCentro: document.getElementById('editEstadoCentro').value,
                    direccionCentro: document.getElementById('editDireccionCentro').value,
                    accion: "editar" // Puedes usar esto en tu PHP para diferenciar acciones
                };

                try {
                    const response = await fetch('/EVA4.5/controllers/consultas/registroadminc.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    const result = await response.json();
                    if(result.success){
                        alert('Centro actualizado correctamente');
                        // Aquí deberías recargar la tabla desde la base de datos real
                        // Por ahora solo ocultamos el formulario
                        document.getElementById('editarCentroForm').style.display = 'none';
                        // Opcional: recarga la página para ver los cambios reales
                        // location.reload();
                    } else {
                        alert('Error al actualizar el centro: ' + (result.message || 'Intenta de nuevo'));
                    }
                } catch (error) {
                    alert('Error de conexión con el servidor');
                }
            });

            document.getElementById('cancelarEdicion').addEventListener('click', function() {
                document.getElementById('editarCentroForm').style.display = 'none';
            });

            // Inicializar tabla al cargar
            cargarTabla();
        </script>-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
    </html>